@model RestaurantWeb.Models.ViewModels.KategoriDeleteVm 


<h2>Kategori Sil</h2>

@if (!Model.HasProducts)
{
    <div class="alert alert-warning">
        <strong>@Model.Kategori.Ad</strong> kategorisini silmek istediğinize emin misiniz?
    </div>
}


<form asp-action="Delete" method="post">
    @Html.AntiForgeryToken()
    <input type="hidden" name="id" value="@Model.Kategori.Id" /> 
    @if (Model.HasProducts) 
    {
        <div class="alert alert-danger mt-3"> 
            Bu kategoriye bağlı ürünler bulunduğu için silinemez. 
            Önce ürünleri silmeli veya başka kategoriye taşımalısınız. 
        </div>
    }
    else 
    {
        <button type="submit" class="btn btn-danger">Evet, Sil</button>
    }
    <a asp-action="Index" class="btn btn-secondary">Vazgeç</a>

    @if (Model.HasProducts && Model.BagliUrunler.Any())
    {
        <h5>Bu kategoriye bağlı ürünler</h5>
        <table class="table table-sm table-striped">
            <thead>
                <tr>
                    <th>Id</th> 
                    <th>Ad</th> 
                    <th>Fiyat</th> 
                    <th>Aktif</th> 
                </tr> 
            </thead> 
            <tbody>
                @foreach (var u in Model.BagliUrunler)
                {
                    <tr>
                        <td>@u.Id</td>
                        <td>@u.Ad</td> 
                        <td>@u.Fiyat</td> 
                        <td>@(u.AktifMi ? "Evet" : "Hayır")</td>
                    </tr>
                }
            </tbody> 
        </table>
    }
</form>
